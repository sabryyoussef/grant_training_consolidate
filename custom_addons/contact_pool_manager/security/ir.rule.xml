<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Contact Pool Security Rules -->
    
    <!-- Managers can see all pools -->
    <record id="contact_pool_manager_rule" model="ir.rule">
        <field name="name">Contact Pool: Manager Access</field>
        <field name="model_id" ref="model_contact_pool"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('sales_team.group_sale_manager'))]"/>
    </record>
    
    <!-- Salespersons can see pools assigned to them or pools they created -->
    <record id="contact_pool_salesperson_rule" model="ir.rule">
        <field name="name">Contact Pool: Salesperson Access</field>
        <field name="model_id" ref="model_contact_pool"/>
        <field name="domain_force">[
            '|',
            ('sales_person_id', '=', user.id),
            ('created_by', '=', user.id)
        ]</field>
        <field name="groups" eval="[(4, ref('sales_team.group_sale_salesman'))]"/>
    </record>
    
    <!-- Users can see pools they created -->
    <record id="contact_pool_user_rule" model="ir.rule">
        <field name="name">Contact Pool: User Access</field>
        <field name="model_id" ref="model_contact_pool"/>
        <field name="domain_force">[('created_by', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('base.group_user'))]"/>
    </record>
</odoo>
